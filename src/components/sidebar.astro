---
import HardDriveIcon from "@/assets/icons/lucide--hard-drive.svg";
import ContainerIcon from "@/assets/icons/lucide--container.svg";
import NetworkIcon from "@/assets/icons/lucide--network.svg";
import FileCodeIcon from "@/assets/icons/lucide--file-code.svg";
import HexagonIcon from "@/assets/icons/lucide--hexagon.svg";
import WrenchIcon from "@/assets/icons/lucide--wrench.svg";
import PlugIcon from "@/assets/icons/lucide--plug.svg";
import TokenWhaleIcon from "@/assets/icons/token--whale.svg";

const currentPage = Astro.url.pathname;

const { host } = Astro.locals;
const projectsCount = host.projects.length;
const containersCount = host.containers.length;
const imagesCount = host.images.length;
const networksCount = host.networks.length;
const volumesCount = host.volumes.length;
const buildsCount = host.builds.length;
const pluginsCount = host.plugins.length;
---

<nav>
  <a href="/" class="app">
    <TokenWhaleIcon />
    <span>Dock<br />board</span>
  </a>
  <div class="divider"></div>
  <a class="page" href="/projects" data-active={currentPage.startsWith("/projects")}>
    <FileCodeIcon />
    <span>Projects</span>
    <span class="count">{projectsCount}</span>
  </a>
  <a class="page" href="/containers" data-active={currentPage.startsWith("/containers")}>
    <ContainerIcon />
    <span>Containers</span>
    <span class="count">{containersCount}</span>
  </a>
  <a class="page" href="/images" data-active={currentPage.startsWith("/images")}>
    <HexagonIcon />
    <span>Images</span>
    <span class="count">{imagesCount}</span>
  </a>
  <a class="page" href="/networks" data-active={currentPage.startsWith("/networks")}>
    <NetworkIcon />
    <span>Networks</span>
    <span class="count">{networksCount}</span>
  </a>
  <a class="page" href="/volumes" data-active={currentPage.startsWith("/volumes")}>
    <HardDriveIcon />
    <span>Volumes</span>
    <span class="count">{volumesCount}</span>
  </a>
  <div class="divider"></div>
  <a class="page" href="/builds" data-active={currentPage.startsWith("/builds")}>
    <WrenchIcon />
    <span>Builds</span>
    <span class="count">{buildsCount}</span>
  </a>
  <a class="page" href="/plugins" data-active={currentPage.startsWith("/plugins")}>
    <PlugIcon />
    <span>Plugins</span>
    <span class="count">{pluginsCount}</span>
  </a>
</nav>

<style>
  nav {
    background-color: var(--color-surface-200);
    padding: 10px;
    display: flex;
    flex-direction: column;
    gap: 4px;
    border-right: 1px solid var(--color-surface-300);

    & > .app {
      display: flex;
      place-content: center;
      place-items: center;
      gap: 6px;

      color: var(--color-primary);
      margin-right: 6px;

      font-size: 115%;
      font-weight: 850;
      line-height: 1.1;
      letter-spacing: 10%;
      text-transform: uppercase;

      transition-property: color;
      transition-duration: 100ms;
      transition-timing-function: ease-in-out;

      &:hover {
        color: var(--color-primary-light);
      }

      & > svg {
        width: 54px;
        height: 54px;
      }
    }

    & > .divider {
      height: 1px;
      background-color: var(--color-surface-300);
      margin-block: 10px;
      margin-inline: 4px;
    }

    & > .page {
      display: flex;
      align-items: center;
      gap: 10px;
      padding-block: 10px;
      padding-inline: 12px;
      border-radius: 8px;
      font-size: 90%;
      border-left: 2px solid transparent;

      color: var(--color-text-400);

      transition-property: color, border-left-color, background-color;
      transition-duration: 100ms;
      transition-timing-function: ease-in-out;

      &[data-active="false"]:hover {
        color: var(--color-text-200);
      }

      &[data-active="true"] {
        color: var(--color-text-100);
        background-color: var(--color-surface-250);
        border-left-color: var(--color-primary);
        font-weight: 600;

        & > .count {
          background-color: var(--color-surface-400);
          color: var(--color-text-400);
        }
      }

      & > .count {
        background-color: var(--color-surface-300);
        padding: 3px 6px;
        border-radius: 9999px;
        font-size: 75%;
        font-weight: 600;
        color: var(--color-text-500);
        margin-left: auto;
      }
    }

    svg {
      width: 16px;
      height: 16px;
    }
  }
</style>
